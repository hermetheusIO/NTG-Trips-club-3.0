# Sistema Web-app NonTourist Guide - Coimbra

## CONTEXTO DO PROJETO
Desenvolver uma aplica√ß√£o full-stack com IA para NonTourist Guide (NTG), 
empresa de experi√™ncias tur√≠sticas aut√™nticas em Coimbra, Portugal.

## ARQUITETURA GERAL

### Stack T√©cnico Sugerido:
- **Frontend**: React/Next.js + TailwindCSS
- **Backend**: Node.js + Express
- **Database**: PostgreSQL ou MongoDB
- **IA/LLM**: OpenAI API (para Agente Teresa)
- **Integra√ß√£o**: WhatsApp Business API
- **Deploy**: Replit ‚Üí produ√ß√£o

### Branding NTG:
[VOC√ä DEVE ADICIONAR: cores, tipografia, logo URL, identidade visual]

---

## FLUXO DE USU√ÅRIO - LANDING PAGE

### P√°gina Inicial (/)
**Elementos:**
- Logo NTG (topo)
- Hero section compacta com headline atrativa
- 3 CTAs principais (bot√µes):

#### 1Ô∏è‚É£ "QUERO CONHECER COIMBRA"
**Comportamento:** Abre expans√≠vel (accordion/toggle)
**Conte√∫do do expans√≠vel:**
- Texto: "Conhe√ßa a Teresa, a nossa Guia de Intelig√™ncia Org√¢nica de Coimbra, 
  e desbloqueie lugares que turistas n√£o chegam!"
- Bot√£o CTA: "Quero Falar com a Teresa!"

**Ao clicar no CTA:**
‚Üí Redireciona para `/qualificacao`

#### 2Ô∏è‚É£ "QUERO VIVER COIMBRA"
**Comportamento:** Clique direto
‚Üí Redireciona para `/experiencias`

#### 3Ô∏è‚É£ "QUERO CONHECER LUGARES FORA DE COIMBRA"
**Comportamento:** Clique direto
‚Üí Redireciona para `/ntg-trips`

---

## M√ìDULO 1: FORMUL√ÅRIO DE QUALIFICA√á√ÉO (/qualificacao)

### Funcionalidade:
Formul√°rio com 5 perguntas estrat√©gicas para segmentar leads e personalizar 
a experi√™ncia com a Agente Teresa.

### Perguntas (VOC√ä DEVE DEFINIR):
1. [Ex: "Primeira vez em Coimbra?"]
2. [Ex: "Quantos dias vai ficar?"]
3. [Ex: "Viaja sozinho(a) ou acompanhado(a)?"]
4. [Ex: "Que tipo de experi√™ncia procura?" - m√∫ltipla escolha]
5. [Ex: "Como nos conheceu?"]

### Output do Formul√°rio:
**Ao submeter:**
1. Salvar no banco de dados ‚Üí tabela `leads_qualificados`
   - Campos: nome, email, telefone, respostas[], tipo_lead, data_qualificacao
   - Segmenta√ß√£o autom√°tica por tipo (ex: aventureiro, gastron√¥mico, cultural)

2. Enviar dados via webhook/API para WhatsApp Business
   - Estrutura JSON com dados do lead
   - Acionar Agente Teresa com contexto do usu√°rio

3. Redirecionar usu√°rio para p√°gina de confirma√ß√£o com:
   - QR Code do WhatsApp da Teresa
   - Mensagem: "A Teresa j√° recebeu suas prefer√™ncias e vai te contactar no WhatsApp!"

---

## M√ìDULO 2: AGENTE TERESA (WhatsApp IA)

### Perfil do Agente:
**Nome:** Teresa
**Papel:** Guia Digital de Intelig√™ncia Org√¢nica de Coimbra
**Tom:** Acolhedora, local, conhecedora, pessoal

### Fluxo de Conversa√ß√£o:
1. Mensagem inicial personalizada (usa dados da qualifica√ß√£o)
2. Pergunta: "Que tipo de recomenda√ß√£o posso te dar hoje?"

**Op√ß√µes:**
- üìç **Guia de Pins**: Usu√°rio pergunta sobre lugares espec√≠ficos, 
  Teresa contextualiza hist√≥ria, curiosidades, dicas locais
- üçΩÔ∏è **Guia Gastron√¥mico**: Recomenda√ß√µes de restaurantes curados pela NTG, 
  explica√ß√£o do porqu√™, pratos t√≠picos sugeridos
- ‚ú® **Guia de Experi√™ncias**: Experi√™ncias pagas da curadoria NTG 
  (puxar do database), com descri√ß√£o e link de compra

### Integra√ß√£o T√©cnica:
- WhatsApp Business API + OpenAI API (GPT-4)
- RAG (Retrieval Augmented Generation) com database de:
  - Lugares de Coimbra (pins)
  - Restaurantes recomendados
  - Experi√™ncias cadastradas
- Sistema de mem√≥ria de conversa√ß√£o por usu√°rio

---

## M√ìDULO 3: CAT√ÅLOGO DE EXPERI√äNCIAS (/experiencias)

### Layout:
- Grid responsivo de cards
- Cada card mostra:
  - Foto da experi√™ncia
  - T√≠tulo
  - Breve descri√ß√£o
  - Pre√ßo
  - Bot√£o "Reservar" ou "Saiba Mais"

### Funcionalidade:
- Filtros: tipo de experi√™ncia, pre√ßo, dura√ß√£o, data
- Modal ou p√°gina detalhada ao clicar
- Integra√ß√£o com sistema de pagamento (Stripe/PayPal)

### Database:
Tabela `experiencias`:
- id, nome, descricao, preco, duracao, categoria, imagem_url, 
  disponibilidade, terceiro (boolean), link_compra

---

## M√ìDULO 4: NTG TRIPS (/ntg-trips)

### Se√ß√µes:

#### A) Viagens Dispon√≠veis para Reserva
- Cards com: destino, data, vagas dispon√≠veis, pre√ßo
- Bot√£o "Reservar Agora" ‚Üí p√°gina de venda individual

#### B) Viagens Realizadas (Galeria)
- Cards com: destino, data, thumbnail
- Ao clicar ‚Üí p√°gina com galeria de fotos
- **Acesso:** apenas quem participou (login/c√≥digo)

#### C) Formul√°rio "Me Avise"
- Campos: nome, email, prefer√™ncias de destino/tipo de viagem
- Salvar em `leads_trips` para remarketing

### Database:
Tabela `viagens`:
- id, destino, data_inicio, data_fim, preco, vagas_totais, 
  vagas_disponiveis, status (aberta/fechada/realizada), 
  galeria_url, descricao_venda

---

## M√ìDULO 5: PAINEL ADMINISTRATIVO (/admin)

### Autentica√ß√£o:
- Login seguro (JWT)
- Roles: admin, editor

### Funcionalidades:

#### Dashboard Principal:
- KPIs em cards:
  - Total de leads qualificados (por per√≠odo)
  - Convers√£o formul√°rio ‚Üí WhatsApp
  - Experi√™ncias mais reservadas
  - Receita total
  - Viagens com mais interesse
- Gr√°ficos: evolu√ß√£o de leads, origem de tr√°fego, segmenta√ß√£o

#### Gest√£o de Experi√™ncias:
- CRUD completo (Create, Read, Update, Delete)
- Upload de imagens
- Status ativo/inativo

#### Gest√£o de Viagens:
- CRUD completo
- Gerenciar vagas
- Upload de galeria de fotos
- Gerar c√≥digo de acesso para participantes

#### Gest√£o de Leads:
- Tabela com filtros e busca
- Exportar para CSV
- Visualizar perfil completo do lead
- Status: novo, contactado, convertido

#### Gest√£o de Conte√∫do (Teresa):
- Atualizar base de conhecimento (pins, restaurantes)
- Hist√≥rico de conversas (com privacidade)

---

## REQUISITOS T√âCNICOS

### Responsividade:
- Mobile-first design
- Breakpoints: 320px, 768px, 1024px, 1440px

### Performance:
- Lazy loading de imagens
- Code splitting
- Cache estrat√©gico

### SEO:
- Meta tags din√¢micas
- Open Graph para compartilhamento
- Sitemap XML

### Seguran√ßa:
- Sanitiza√ß√£o de inputs
- Rate limiting nas APIs
- HTTPS obrigat√≥rio
- Prote√ß√£o contra SQL injection

### Integra√ß√µes Necess√°rias:
1. WhatsApp Business API
2. OpenAI API (GPT-4 + embeddings)
3. Gateway de pagamento
4. Google Analytics / Plausible
5. Cloudinary/S3 para imagens

---

## ESTRUTURA DE PASTAS SUGERIDA
